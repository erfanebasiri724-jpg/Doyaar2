<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± - POS Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>
<style>
body{font-family:sans-serif;background:#fff0f5;margin:0;padding:0;color:#333;}
header{background:#d18cd1;color:white;padding:15px;text-align:center;font-size:1.5em;font-weight:bold;}
.container{display:flex;flex-wrap:wrap;padding:10px;}
.categories{flex:1 1 60%;padding:10px;max-width:800px;position:relative;}
.details-category{background:#fff0ff;margin-bottom:10px;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
.details-category summary{padding:10px;background:#e5b3f2;border-radius:6px;cursor:pointer;font-weight:bold;}
.product-card{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-top:1px solid #eee;border-radius:4px;margin:3px 0;transition:0.2s; background:#fff;}
.product-card:hover{background:#ffe6ff;}
.product-card button{background:#d18cd1;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;transition:0.2s;}
.product-card button:hover{background:#b069c2;}
.added-tick{color:green;margin-left:5px;display:none;font-weight:bold;}
.cart-container{flex:1 1 35%;padding:10px;position:sticky;top:10px;max-height:80vh;overflow:auto;background:#fff0ff;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
.cart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;flex-wrap:wrap;}
.cart-header button{background:#d18cd1;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin-left:5px;margin-top:5px;transition:0.2s;}
.cart-header button:hover{background:#b069c2;}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-top:1px solid #eee;}
.cart-item button{padding:2px 6px;margin:0 2px;border:none;border-radius:4px;background:#d18cd1;color:white;cursor:pointer;transition:0.2s;}
.cart-item button:hover{background:#b069c2;}
#searchBar{width:100%;padding:8px;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;}
#searchResults{background:white;border:1px solid #ccc;border-radius:4px;max-height:200px;overflow:auto;position:absolute;z-index:100;display:none;width:calc(100% - 20px);}
.search-item{padding:5px;cursor:pointer;display:flex;justify-content:space-between;}
.search-item:hover{background:#ffe6ff;}
.highlight{background-color:yellow;}
.invoicePrint{display:none;}
</style>
</head>
<body>
<header>Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø± - POS Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</header>

<div class="container">
  <div class="categories">
    <input type="text" id="searchBar" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„...">
    <div id="searchResults"></div>
    <div id="categories"></div>
  </div>
  
  <div class="cart-container">
    <div class="cart-header">
      <span>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ ğŸ›’ <span id="cartCount">0</span></span>
      <button id="printBtn">Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±</button>
      <button id="emptyCartBtn">ğŸ—‘ Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
    </div>
    <div id="cartItems"></div>
    <div style="margin-top:10px;font-weight:bold;">Ø¬Ù…Ø¹ Ú©Ù„: <span id="cartTotal">0</span> ØªÙˆÙ…Ø§Ù†</div>
  </div>
</div>

<div class="invoicePrint" id="invoicePrint">
  <h3 style="text-align:center;">Ú©Ø§ÙÙ‡ Ø¨Ø³ØªÙ†ÛŒ Ø¯ÙˆÛŒØ§Ø±</h3>
  <table style="width:100%;border-collapse:collapse;" id="invBody"></table>
  <p>Ø¬Ù…Ø¹ Ú©Ù„: <span id="invTotal"></span> ØªÙˆÙ…Ø§Ù†</p>
  <p>ØªØ§Ø±ÛŒØ®: <span id="invDate"></span></p>
</div>

<script>
// ======= Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ =======
const productsData=[
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø¨Ø¯ÙˆÙ† Ù…ØºØ²",price:220000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù…ØºØ²Ø¯Ø§Ø±",price:260000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:40000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø³Ù†ØªÛŒ Ø­ØµÛŒØ±ÛŒ",price:40000,category:"Ø¨Ø³ØªÙ†ÛŒ Ù‡Ø§"},
{name:"Ø·Ø§Ù„Ø¨ÛŒ Ø¨Ø³ØªÙ†ÛŒ",price:70000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬ Ø¨Ø³ØªÙ†ÛŒ",price:60000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø³ØªÙ†ÛŒ Ø§Ø³Ú©ÙˆÙ¾ÛŒ",price:25000,category:"Ø¨Ø³ØªÙ†ÛŒâ€ŒÙ‡Ø§"},
{name:"ÙØ§Ù„ÙˆØ¯Ù‡",price:50000,category:"ÙØ§Ù„ÙˆØ¯Ù‡"},
{name:"ÙØ§Ù„ÙˆØ¯Ù‡ Ø¨Ø³ØªÙ†ÛŒ",price:70000,category:"ÙØ§Ù„ÙˆØ¯Ù‡"},
{name:"Ø¢Ø¨ Ù‡ÙˆÛŒØ¬",price:40000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ø§Ù†Ø§Ø±",price:90000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ø²Ø±Ø´Ú©",price:90000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ø³ÛŒØ¨",price:70000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ø·Ø§Ù„Ø¨ÛŒ",price:60000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡",price:60000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ø¢Ù„Ø¨Ø§Ù„Ùˆ",price:60000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø¢Ø¨ Ù¾Ø±ØªØºØ§Ù„",price:80000,category:"Ø¢Ø¨Ù…ÛŒÙˆÙ‡"},
{name:"Ø´ÛŒØ± Ù…ÙˆØ²",price:80000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø®Ø±Ù…Ø§",price:120000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ú¯Ø±Ø¯Ùˆ",price:150000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒØ± Ù¾Ø³ØªÙ‡",price:150000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒØ± Ø§Ù†Ø¨Ù‡",price:180000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒØ± Ù…ÙˆØ² Ø¨Ø³ØªÙ†ÛŒ",price:100000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø´ÛŒÚ©",price:120000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ø¢ÛŒØ³ Ù¾Ú©",price:120000,category:"Ø´ÛŒØ±Ù‡Ø§ Ùˆ Ø´ÛŒÚ©â€ŒÙ‡Ø§"},
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ù„ÛŒÙˆØ§Ù†ÛŒ",price:160000,category:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ú©ÙˆÚ†Ú©",price:180000,category:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
{name:"Ù…Ø¹Ø¬ÙˆÙ† Ú©Ø§Ø³Ù‡â€ŒØ§ÛŒ Ø¨Ø²Ø±Ú¯",price:250000,category:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
{name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù„ÛŒÙˆØ§Ù†ÛŒ",price:70000,category:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
{name:"Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ Ù…Ø®ØµÙˆØµ",price:150000,category:"Ù…Ø¹Ø¬ÙˆÙ† Ùˆ Ú©ÛŒÚ© Ø¨Ø³ØªÙ†ÛŒ"},
{name:"Ø°Ø±Øª Ù…Ú©Ø²ÛŒÚ©ÛŒ Ú©ÙˆÚ†Ú©",price:90000,category:"Ø°Ø±Øªâ€ŒÙ‡Ø§"},
{name:"Ø°Ø±Øª Ù…Ú©Ø²ÛŒÚ©ÛŒ Ø¨Ø²Ø±Ú¯",price:130000,category:"Ø°Ø±Øªâ€ŒÙ‡Ø§"},
{name:"Ú©ÛŒÚ© Ø´Ú©Ù„Ø§ØªÛŒ",price:90000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ Ú©ÙˆÚ†Ú©",price:10000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ Ø¨Ø²Ø±Ú¯",price:15000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ù„Ø§ÛŒÙ",price:50000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ù‡Ø§ÛŒÙ¾",price:60000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ú©ÛŒÙ†Ú¯",price:45000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ú©Ø±ÙˆÙ†Ø§",price:150000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"ÙˆÛŒØªØ§Ù…ÛŒÙ† Ø³ÛŒ",price:40000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯ÛŒØ§Ù‡ÛŒ",price:40000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯ÛŒØ§Ù‡ÛŒ Ø²Ø¹ÙØ±Ø§Ù†ÛŒ",price:45000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ø¢ÛŒØ³ Ù…Ø§Ù†Ú©ÛŒ",price:50000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ø¢Ù„ÙˆÙˆØ±Ø§",price:42000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ù„ÛŒÙ…ÙˆÙ†Ø§Ø¯ Ø´ÛŒØ´Ù‡ Ø§ÛŒ",price:35000,category:"Ù…ØªÙØ±Ù‚Ù‡"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø¢Ø¨ Ù‡ÙˆÛŒØ¬",price:80000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø¢Ø¨ Ø·Ø§Ù„Ø¨ÛŒ",price:140000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø¢Ø¨ Ø³ÛŒØ¨",price:180000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø¢Ø¨ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡",price:120000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø¢Ø¨ Ù¾Ø±ØªØºØ§Ù„",price:200000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"},
{name:"Ø¨Ø·Ø±ÛŒ Û± Ù„ÛŒØªØ±ÛŒ Ø´ÛŒØ± Ù…ÙˆØ²",price:180000,category:"Ø¨Ø·Ø±ÛŒâ€ŒÙ‡Ø§"}
];

const categoriesData=[...new Set(productsData.map(p=>p.category))];
let cart=[];

// ======= Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ =======
const categoriesDiv=document.getElementById('categories');
const cartItemsDiv=document.getElementById('cartItems');
const cartTotal=document.getElementById('cartTotal');
const cartCount=document.getElementById('cartCount');
const searchBar=document.getElementById('searchBar');
const searchResults=document.getElementById('searchResults');
const printBtn=document.getElementById('printBtn');
const emptyCartBtn=document.getElementById('emptyCartBtn');

// ======= Ø±Ù†Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ =======
function renderCategories(){
categoriesDiv.innerHTML='';
categoriesData.forEach(cat=>{
const catProducts=productsData.filter(p=>p.category===cat);
const details=document.createElement('details');
const summary=document.createElement('summary');
summary.textContent=cat;
details.appendChild(summary);
catProducts.forEach(p=>{
const div=document.createElement('div');
div.className='product-card';
div.innerHTML=`<span>${p.name} - ${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù† <span class="added-tick">âœ”</span></span><button>Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</button>`;
const btn=div.querySelector('button');
const tick=div.querySelector('.added-tick');
btn.addEventListener('click',()=>{
addToCart(p);tick.style.display='inline';setTimeout(()=>tick.style.display='none',300);
});
details.appendChild(div);
});
categoriesDiv.appendChild(details);
});
}

// ======= Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ =======
function addToCart(product){
let found=cart.find(item=>item.name===product.name);
if(found){found.qty++;}else{cart.push({...product,qty:1});}
updateCart();
}

// ======= Ø­Ø°Ù Ø§Ø² Ø³Ø¨Ø¯ =======
function removeFromCart(product){
cart=cart.filter(item=>item.name!==product.name);
updateCart();
}

// ======= Ú©Ù… Ú©Ø±Ø¯Ù† ØªØ¹Ø¯Ø§Ø¯ =======
function decrementItem(product){
let found=cart.find(item=>item.name===product.name);
if(found){found.qty--; if(found.qty<=0) removeFromCart(product);}
updateCart();
}

// ======= Ø¢Ù¾Ø¯ÛŒØª Ø³Ø¨Ø¯ =======
function updateCart(){
cartItemsDiv.innerHTML='';
let total=0;
cart.forEach(it=>{
const div=document.createElement('div');
div.className='cart-item';
div.innerHTML=`<span>${it.name} (${it.qty})</span>
<div>
<button onclick='decrementItem(${JSON.stringify(it)})'>-</button>
<button onclick='addToCart(${JSON.stringify(it)})'>+</button>
<button onclick='removeFromCart(${JSON.stringify(it)})'>Ø­Ø°Ù</button>
</div>`;
cartItemsDiv.appendChild(div);
total+=it.price*it.qty;
});
cartTotal.textContent=total.toLocaleString();
cartCount.textContent=cart.reduce((a,b)=>a+b.qty,0);
localStorage.setItem('cart',JSON.stringify(cart));
}

// ======= Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³Ø¨Ø¯ Ø§Ø² localStorage =======
window.onload=function(){
const saved=localStorage.getItem('cart');
if(saved) cart=JSON.parse(saved);
updateCart();
renderCategories();
}

// ======= Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ù‡Ø§ÛŒÙ„Ø§ÛŒØª Ùˆ Quick Add =======
searchBar.addEventListener('input',()=>{
const val=searchBar.value.trim().replace(/Ø¢/g,'Ø§');
if(val===''){searchResults.style.display='none';return;}
let regex=new RegExp(`(${val})`,"gi");
let filtered=productsData.filter(p=>p.name.replace(/Ø¢/g,'Ø§').includes(val));
searchResults.innerHTML='';
filtered.forEach(p=>{
const div=document.createElement('div');
div.className='search-item';
const highlighted=p.name.replace(regex, `<span class="highlight">$1</span>`);
div.innerHTML=`<span>${highlighted} - ${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span><button>+</button>`;
div.querySelector('button').addEventListener('click',()=>{
addToCart(p);
searchBar.value='';searchResults.style.display='none';
});
searchResults.appendChild(div);
});
searchResults.style.display=filtered.length>0?'block':'none';
});

// ======= Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ± =======
printBtn.addEventListener('click',()=>{
const invBody=document.getElementById('invBody');
const invTotal=document.getElementById('invTotal');
const invDate=document.getElementById('invDate');
invBody.innerHTML='';
let total=0;
cart.forEach(it=>{
const tr=document.createElement('tr');
tr.innerHTML=`<td style="text-align:right">${it.name}</td><td>${it.qty}</td><td>${it.price.toLocaleString()}</td><td>${(it.price*it.qty).toLocaleString()}</td>`;
invBody.appendChild(tr);
total+=it.price*it.qty;
});
invTotal.textContent=total.toLocaleString();
invDate.textContent=new Date().toLocaleString();
const printContent=document.getElementById('invoicePrint').innerHTML;
const newWin=window.open('','_blank','width=400,height=600');
newWin.document.write('<html><head><title>Ø±Ø³ÛŒØ¯</title></head><body style="background:white;color:black;">'+printContent+'</body></html>');
newWin.document.close();newWin.focus();newWin.print();newWin.close();
});

// ======= Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯ =======
emptyCartBtn.addEventListener('click', () => {
cart = [];
updateCart();
});
</script>
</body>
</html>
